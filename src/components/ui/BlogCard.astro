---
import Wrapper from '../../layouts/Wrapper';
import { ItemInViewAnimation } from './InViewAnimation';
import { Paragraph } from './typography';
export interface Props {
	title: string;
	abstract: string;
	href: string;
  date: string;
  slug: string;
}

const { href, title, abstract, date, slug } = Astro.props;

const isStartWith = (fullStr: string, prefix: string) => {
  if (fullStr.length < prefix.length) return false
  fullStr = fullStr.toUpperCase()
  prefix = prefix.toUpperCase()
  for (let i=0; i<prefix.length; i++) {
    if (fullStr[i] !== prefix[i]) return false
  }
  return true
}
---
<ItemInViewAnimation className="w-full flex flex-col items-center text-center" delay={0.1} client:visible >
  <li class="card list-none w-full flex p-[1px] bg-[color:#23262d] bg-[image:none] bg-[size:400%] bg-[position:100%] rounded-[7px] opacity-100">
    <a href={href ? href : "blog/" + slug} target={isStartWith(href, "http") ? "_blank" : "_self"} class="w-full [text-decoration:none] leading-[1.4] p-[calc(1.5rem-1px)] rounded-lg bg-[#23262d] opacity-80 flex flex-col">
      <Wrapper className="h-full w-full my-10 flex flex-col justify-center items-center lg:my-0">
        <h2 class="m-0 text-md lg:text-xl font-semibold tracking-wide text-neutral-50">
          {title}
          <span>&rarr;</span>
        </h2>
        <Paragraph className="mt-2 mb-0 text-neutral-50">
          {abstract}
        </Paragraph>
      </Wrapper>
    </a>
  </li>
</ItemInViewAnimation>

<style>
	.card {
		transition: background-position 0.6s cubic-bezier(0.22, 1, 0.36, 1);
		box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.1);
	}
	h2 {
		transition: color 0.6s cubic-bezier(0.22, 1, 0.36, 1);
	}
	.card:is(:hover, :focus-within) {
		background-position: 0;
		background-image: var(--accent-gradient);
	}
	.card:is(:hover, :focus-within) h2 {
    color: rgb(var(--accent-light));
	}
  .tag {
    color: rgb(var(--accent-light));
    box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.1);
  }
</style>

